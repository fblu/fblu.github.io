<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>What are Archetypes? | Electrode</title>
  <meta name="viewport" content="width=device-width">
  <meta property="og:title" content="What are Archetypes? | Electrode">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://electrode-io.github.io//docs/what_are_archetypes.html">
  <meta property="og:image" content="https://electrode-io.github.io/img/logo_og.png">
  <meta property="og:description" content="Universal React and Node Applications simplified, performant, and reusable.">
  <meta property="fb:app_id" content="623268441017527">


  <link rel="shortcut icon" href="/img/favicon-64.png">
  <link rel="alternate" type="application/rss+xml" title="Electrode" href="https://electrode-io.github.io/feed.xml">

  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/electrode-docs.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700" type="text/css">

  <script src="//use.typekit.net/vqa1hcx.js"></script>

  <!-- Add GA for all github pages -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84301828-1', 'auto');
  ga('send', 'pageview');
</script>


  <!--[if lte IE 8]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/es5-shim.min.js"></script>
  <script src="/js/es5-sham.min.js"></script>
  <![endif]-->

</head>
<body>

  <div class="container">
    <header class="header">
  <a href="/index.html">
    <img class="electrode-logo" src="/img/electrode-logo-sm@2x.png" />
  </a>
  <div class="header-right-side">
    <ul class="header-menu">
      <li class="header-menu-item home"><a href="/index.html">HOME</a></li>
      <li class="header-menu-item docs  selected "><a href="/docs/what_is_electrode.html">DOCS</a></li>
      <li class="header-menu-item contribute "><a href="/docs/contribute.html">CONTRIBUTE</a></li>
    </ul>
    <ul class="header-social">
      <li class="header-social-pocket"><a href="https://getpocket.com/"><img src="/img/pocket_@1x.png" /></a></li>
      <li class="header-social-twitter"><a href="https://twitter.com/electrode_io"><img src="/img/twitter_@1x.png" /></a></li>
      <li class="header-social-github"><a href="https://github.com/electrode-io"><img src="/img/github_@1x.png" /></a></li>
    </ul>
  </div>
</header>


    

    <section class="content wrap documentationContent">
  <div class="nav-docs">
  
    <div class="nav-docs-section">
      <h3>Overview</h3>
      
        <ul>
          


  
  
  
  
    <li>
    

    <a href="/docs/what_is_electrode.html"> &nbsp; What is Electrode?</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/why_use_electrode.html"> &nbsp; Why Use Electrode?</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/requirements.html"> &nbsp; Requirements</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


        </ul>
      
    </div>
  
    <div class="nav-docs-section">
      <h3>Getting Started</h3>
      
        
          <h5>Quick Start</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/get_started.html"> &nbsp; Get Started</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/build_component.html"> &nbsp; Build Component</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/deploy_app.html"> &nbsp; Deploy Your App</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/whats_inside.html"> &nbsp; What's Inside</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/what_are_archetypes.html" class="active"> &nbsp; What are Archetypes?</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
          <h5>Intermediate</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/create_reusable_component.html"> &nbsp; Create a Reusable Component</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/low_level_components.html"> &nbsp; Low-Level Components</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/component_helpers.html"> &nbsp; Component Helpers</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/develop_styles.html"> &nbsp; Develop Styles</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/high_level_component.html"> &nbsp; Develop Main Component</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/test_components.html"> &nbsp; Test Components</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/add_examples.html"> &nbsp; Add Examples</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/build_and_demo.html"> &nbsp; Build and Demo</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/generate_docs.html"> &nbsp; Generate Docs</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/build_server_plugin.html"> &nbsp; Build a Server Plugin</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/add_routes.html"> &nbsp; Add Routes</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/server_config.html"> &nbsp; Server Config</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/more_deployments.html"> &nbsp; More Deployments</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/docker.html"> &nbsp; Docker</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/kubernetes.html"> &nbsp; Kubernetes</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/build_with_material_ui.html"> &nbsp; Build with material-ui</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/service_workers.html"> &nbsp; Build a Progressive Web App</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/ss_data_hydration.html"> &nbsp; Server Side Data Hydration</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
          <h5>Advanced</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/stand_alone_modules.html"> &nbsp; Stand Alone Modules</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/confippet.html"> &nbsp; Confippet</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/above_fold_rendering.html"> &nbsp; Above The Fold Rendering</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/server_side_render_cache.html"> &nbsp; Server Side Render Caching + Profiling</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/stateless_csrf_validation.html"> &nbsp; Stateless CSRF Validation</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/redux_router_engine.html"> &nbsp; Redux Router Engine</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/electrode_tools.html"> &nbsp; Powerful Electrode Tools</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/electrify.html"> &nbsp; Electrify</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/electrode_explorer.html"> &nbsp; Electrode Explorer</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/bundle_analyzer.html"> &nbsp; Bundle Analyzer</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/electrode_boilerplate.html"> &nbsp; Electrode Boilerplate</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
          <h5>Over the Air</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/electrode_react_native_over_the_air_electron.html"> &nbsp; React Native and Over the Air</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
      
    </div>
  
    <div class="nav-docs-section">
      <h3>Contributing</h3>
      
        <ul>
          


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/contribute.html"> &nbsp; Contribute</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/community.html"> &nbsp; Community</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  


        </ul>
      
    </div>
  
    <div class="nav-docs-section">
      <h3>Resources</h3>
      
        <ul>
          


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/further_reading.html"> &nbsp; Further Reading</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/glossary.html"> &nbsp; Glossary</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/faq.html"> &nbsp; FAQs</a>

    
    </li>
  


        </ul>
      
    </div>
  


  <!-- Tips Nav -->
  <!-- 
    <div class="nav-docs-section">
      <h3>Tips</h3>
      <ul>
        
          <li>
            <a href="/tips/introduction.html">Introduction</a>
          </li>
        
      </ul>
    </div>
   -->

  <!-- Contributing Nav -->
  <!-- 
    <div class="nav-docs-section">
      <h3>Contributing</h3>
      <ul>
        
          <li>
            <a href="/contributing/design-principles.html">Design Principles</a>
          </li>
        
      </ul>
    </div>
   -->
</div>


  <div class="inner-content">
    <a class="edit-page-link" href="https://github.com/electrode-io/electrode-io.github.io/tree/master/_docs/02.7-what_are_archetypes.markdown" target="_blank">Edit on GitHub</a>
    <h1>What are Archetypes?</h1>
    <div class="subHeader"></div>

    <blockquote>
  <p>Archetypes are encapsulated boilerplates for centralizing your project configurations, workflows and dependencies.</p>
</blockquote>

<p>An archetype is an npm module template, which is a “superclass” of a module, think inheritance for npm modules but not one that is used to generate code files and then discarded. Archetypes provide something that is quite far off from what frameworks and app generators provide.</p>

<p>Let’s say that you are developing many different modules and all those modules require you to have very similar configs, scripts and dependencies, you can use the same archetype for all of them. With a generator like Yeoman, you would run the generator once, and it would output your module’s boilerplate and all is fine. However, if you ever wanted to change dependencies, and have that change propagate through to each and every module, you would have to manually go through each module and update those dependencies by hand.</p>

<blockquote>
  <p>Archetypes help to solve the problem of updating module boilerplates, by providing a single source of truth, that all of your modules inherit from.</p>
</blockquote>

<p>If after developing hundreds of modules ( say, React components ), you decide to change your build script, and that build script requires a new dependency, you can change it once in the archetype. Once all of the other modules run <code class="language-plaintext highlighter-rouge">npm install</code>, they will get the updated build scripts as well as the updated dependencies.</p>

<p>Electrode archetypes are a way for every electrode module to share common scripts, workflows, dependencies and best practices that can be updated in real time. That update will then propagate to every module that inherits from that specific archetype.</p>

<blockquote>
  <p>Electrode archetypes:</p>
</blockquote>

<blockquote>
  <ul>
    <li><a href="https://github.com/electrode-io/electrode#app-archetype">electrode-archetype-react-app</a> : Electrode Archetype for Apps.</li>
  </ul>
</blockquote>

<blockquote>
  <ul>
    <li><a href="https://github.com/electrode-io/electrode-archetype-react-component">electrode-archetype-react-component</a> : Electrode archetype for react components.</li>
  </ul>
</blockquote>

<blockquote>
  <ul>
    <li><a href="https://github.com/electrode-io/electrode-archetype-njs-module-dev">electrode-archetype-njs-module-dev</a> : Electrode archetype for server components.</li>
  </ul>
</blockquote>

<p><br /></p>
<h4 id="features">Features</h4>

<p>Archetypes come loaded with the latest technologies for developing, bundling, testing and deployment workflows.</p>

<ul>
  <li>Generate/Build production bundles and assets.</li>
  <li>Transpile your JavaScript using Babel.</li>
  <li>Running eslint rules for client and server JavaScript and their tests.</li>
  <li>Running unit tests for client and server (Karma/Mocha).</li>
  <li>Running functional tests.</li>
  <li>Generate code coverage results for client and server (Istanbul).</li>
  <li>Run a webpack-dev-server for hot reloading of jsx changes.</li>
  <li>Single source of truth for all dependencies.</li>
  <li>Single source for all development, bundling, testing and deployment related workflows.</li>
</ul>

<p><br /></p>
<h4 id="what-configs-exist-inside-archetypes">What configs exist inside archetypes?</h4>

<ul>
  <li>Webpack</li>
  <li>Babel</li>
  <li>Eslint</li>
  <li>Karma/Mocha/Istanbul</li>
</ul>

<p><br /></p>

<h4 id="webpack-config-setup">Webpack config setup</h4>
<p>Let’s peek under the hood into the webpack setup workflow.</p>

<p><em>webpack.config.js</em> Webpack configuration entrypoint</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">lodash</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">mergeWebpackConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">webpack-partial</span><span class="dl">"</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">baseConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./base.js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">defineConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./partial/define.js</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">optimizeConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./partial/optimize</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">localesConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./partial/locales</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">productionSourcemapsConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">./partial/sourcemaps-remote</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">flow</span><span class="p">(</span>
  <span class="nx">mergeWebpackConfig</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">baseConfig</span><span class="p">),</span>
  <span class="nx">optimizeConfig</span><span class="p">(),</span>
  <span class="nx">localesConfig</span><span class="p">(),</span>
  <span class="nx">defineConfig</span><span class="p">(),</span>
  <span class="nx">productionSourcemapsConfig</span><span class="p">()</span>
<span class="p">)();</span>
</code></pre></div></div>

<p><em>Webpack Base Config</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">baseConfig</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">cache</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">context</span><span class="p">:</span> <span class="nx">context</span><span class="p">,</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">LoaderOptionsPlugin</span><span class="p">({</span>
      <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">debug</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">],</span>
  <span class="na">entry</span><span class="p">:</span> <span class="nx">appEntry</span><span class="p">(),</span>
  <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="nx">Path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">dist</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">js</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">pathinfo</span><span class="p">:</span> <span class="nx">inspectpack</span><span class="p">,</span> <span class="c1">// Enable path information for inspectpack</span>
    <span class="na">publicPath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/js/</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">chunkFilename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[hash].[name].js</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">filename</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[name].bundle.[hash].js</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="na">resolve</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">modules</span><span class="p">:</span> <span class="p">[</span>
      <span class="nx">archetypeNodeModules</span><span class="p">,</span>
      <span class="nx">archetypeDevNodeModules</span><span class="p">,</span>
      <span class="nx">AppMode</span><span class="p">.</span><span class="nx">isSrc</span> <span class="o">&amp;&amp;</span> <span class="nx">Path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">AppMode</span><span class="p">.</span><span class="nx">src</span><span class="p">.</span><span class="nx">dir</span><span class="p">)</span> <span class="o">||</span> <span class="kc">null</span>
    <span class="p">]</span>
      <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">archetype</span><span class="p">.</span><span class="nx">webpack</span><span class="p">.</span><span class="nx">modulesDirectories</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">concat</span><span class="p">([</span><span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">(),</span> <span class="dl">"</span><span class="s2">node_modules</span><span class="dl">"</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">identity</span><span class="p">),</span>
    <span class="na">extensions</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">.jsx</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">.json</span><span class="dl">"</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="na">resolveLoader</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">modules</span><span class="p">:</span> <span class="p">[</span>
      <span class="nx">archetypeNodeModules</span><span class="p">,</span>
      <span class="nx">archetypeDevNodeModules</span><span class="p">,</span>
      <span class="nx">Path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">lib</span><span class="dl">"</span><span class="p">),</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">(),</span>
      <span class="dl">"</span><span class="s2">node_modules</span><span class="dl">"</span>
    <span class="p">].</span><span class="nx">filter</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">identity</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p><br /></p>
<h4 id="what-workflows-exist-inside-archetypes">What workflows exist inside archetypes?</h4>
<p>Workflows are tasks exposed via npm scripts &amp; gulp as part of the <a href="https://github.com/electrode-io/electrode#app-archetype">electrode-archetype-react-app</a>, type <code class="language-plaintext highlighter-rouge">gulp</code> on your command prompt to see the full list of workflow tasks.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gulp
[16:56:36] Using gulpfile ~/walmart-oss/test-generator-electrode-app/test-app/gulpfile.js
[16:56:36] Starting 'help'...

Usage
  gulp [TASK] [OPTIONS...]

Available tasks
  build ............................ Build your app's client bundle for production
                                       tasks: ["build-dist"]
  build-analyze -------------------- Build your app's client bundle for production and run bundle analyzer
                                       tasks: ["build-dist","optimize-stats"]
                                       deps: [".optimize-stats"]
  build-browser-coverage ........... Build browser coverage
                                       tasks: ["clean-dist",".build-browser-coverage-1","build-dist:flatten-l10n","build-dist:clean-tmp"]
  build-dev-static ----------------- Build static copy of your app's client bundle for development
                                       tasks: ["clean-dist","build-dist-dev-static"]
  build-dist .......................   tasks: ["clean-dist","build-dist-min","build-dist:flatten-l10n","generate-service-worker","build-dist:clean-tmp"]
  build-webpack-stats-with-fullpath  Build static bundle with stats.json containing fullPaths to inspect the bundle on electrode-electrify

  etc ...
</code></pre></div></div>

<p>Let’s dive a little deeper into an example workflow <code class="language-plaintext highlighter-rouge">gulp build</code> task that is provided by the archetype for a universal React application.</p>

<h4 id="gulp-build">gulp build</h4>
<p>This task produces a production ready js, css bundle. Running <code class="language-plaintext highlighter-rouge">gulp build</code> will run through a few other gulp tasks to help you build your application for a production environment generating a minified bundle ready to use.</p>

<p>The following tasks will be run in order:</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">clean-dist</code>:
  Delete the old <code class="language-plaintext highlighter-rouge">dist/</code> folder</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">build-dist-min</code>:
  Run webpack.config.js This particular production webpack config will be merged with the base config that is located <a href="https://github.com/electrode-io/electrode-archetype-react-app/blob/master/config/webpack/base.js">here.</a>
  Each of the archetypes webpack configs use lodash’s <a href="https://lodash.com/docs/4.16.4#flow">flow</a> and <a href="https://github.com/webpack-config/webpack-partial">webpack-partial</a> to compose together functions that merge partial webpack configs
  together with the base config allowing for a modular configuration file.</p>
  </li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// the production webpack config</span>
<span class="c1">// _.flow is used to compose functions</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">flow</span><span class="p">(</span>
  <span class="c1">// use webpack-partial binding it to a the baseConfig</span>
  <span class="nx">mergeWebpackConfig</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">baseConfig</span><span class="p">),</span>
  <span class="c1">// optimize.js</span>
  <span class="nx">optimizeConfig</span><span class="p">(),</span>
  <span class="c1">// locals.js</span>
  <span class="nx">localesConfig</span><span class="p">(),</span>
  <span class="c1">// define.js</span>
  <span class="nx">defineConfig</span><span class="p">(),</span>
  <span class="c1">// sourcemaps-remote.js</span>
  <span class="nx">productionSourcemapsConfig</span><span class="p">()</span>
<span class="p">)();</span>
</code></pre></div></div>

<p>The production webpack config is merged together with the base config and the following partials:</p>

<ul>
  <li>
    <p><a href="https://github.com/electrode-io/electrode-archetype-react-app/blob/master/config/webpack/partial/optimize.js">optimize.js</a>: Apply webpack’s dedupe plugin to deduplicate similar or equal files from the output bundle in addition to Uglifying the output using the UglifyJS plugin</p>
  </li>
  <li>
    <p><a href="https://github.com/electrode-io/electrode-archetype-react-app/blob/master/config/webpack/partial/locales.js">locales.js</a>: Handle possible dynamic requires within moment.js, so webpack does not include all of the language files</p>
  </li>
  <li>
    <p><a href="https://github.com/electrode-io/electrode-archetype-react-app/blob/master/config/webpack/partial/define.js">define.js</a>: Define a production environment for webpack so it can remove non production code.</p>
  </li>
  <li>
    <p><a href="https://github.com/electrode-io/electrode-archetype-react-app/blob/master/config/webpack/partial/sourcemaps-remote.js">sourcemaps-remote.js</a>: Create sourcemaps.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">build-dist:flatten-l10n</code>:
  Run a script to extract localized messages from a file located in a temporary folder generated by the build and write them to a json file in the dist folder. This script is located <a href="https://github.com/electrode-io/electrode-archetype-react-app/blob/master/scripts/l10n/flatten-messages.js">here.</a></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">generate-service-worker</code>:
  Electrode’s React application archetype has built in support for <a href="https://developers.google.com/web/fundamentals/getting-started/primers/service-workers">service workers</a>. This gulp task will take a service worker precache configuration file (if it exists, electrode does not provide it by default) and generate a new service worker file for caching of static assets with service workers.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">build-dist:clean-tmp</code>:
  Delete the .tmp folder generated by the build.</p>
  </li>
</ul>

<p>The output of <code class="language-plaintext highlighter-rouge">gulp build</code> will look something like this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Hash: 095d27720d0a224d3f5a
Version: webpack 1.13.2
Time: 6607ms
                                    Asset       Size  Chunks             Chunk Names
           bundle.095d27720d0a224d3f5a.js     246 kB       0  <span class="o">[</span>emitted]  main
           style.095d27720d0a224d3f5a.css  182 bytes       0  <span class="o">[</span>emitted]  main
../map/bundle.095d27720d0a224d3f5a.js.map    2.42 MB       0  <span class="o">[</span>emitted]  main
../map/style.095d27720d0a224d3f5a.css.map  107 bytes       0  <span class="o">[</span>emitted]  main
                     ../server/stats.json  233 bytes          <span class="o">[</span>emitted]
                ../isomorphic-assets.json  239 bytes          <span class="o">[</span>emitted]
</code></pre></div></div>



    








<div class="docs-prevnext">
  
    <a class="docs-prev" href="/docs/whats_inside.html">&larr; Prev</a>
  
  
</div>


  </div>
</section>


    <footer class="wrap">
      <div class="left">
        <a href="https://github.com/orgs/electrode-io/people" target="_blank">Acknowledgements</a>
      </div>
      <div class="right">
        &copy; 2020 <a href="http://walmartlabs.com" target="_blank">WalmartLabs</a><br>
        Apache-2.0 license.
      </div>
    </footer>
  </div>
  <div id="fb-root"></div>

  <!--
    TODO: analytics js, etc.
  -->
</body>
</html>
