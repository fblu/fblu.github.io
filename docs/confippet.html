<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Confippet | Electrode</title>
  <meta name="viewport" content="width=device-width">
  <meta property="og:title" content="Confippet | Electrode">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://electrode-io.github.io//docs/confippet.html">
  <meta property="og:image" content="https://electrode-io.github.io/img/logo_og.png">
  <meta property="og:description" content="Universal React and Node Applications simplified, performant, and reusable.">
  <meta property="fb:app_id" content="623268441017527">


  <link rel="shortcut icon" href="/img/favicon-64.png">
  <link rel="alternate" type="application/rss+xml" title="Electrode" href="https://electrode-io.github.io/feed.xml">

  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/electrode-docs.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700" type="text/css">

  <script src="//use.typekit.net/vqa1hcx.js"></script>

  <!-- Add GA for all github pages -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84301828-1', 'auto');
  ga('send', 'pageview');
</script>


  <!--[if lte IE 8]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/es5-shim.min.js"></script>
  <script src="/js/es5-sham.min.js"></script>
  <![endif]-->

</head>
<body>

  <div class="container">
    <header class="header">
  <a href="/index.html">
    <img class="electrode-logo" src="/img/electrode-logo-sm@2x.png" />
  </a>
  <div class="header-right-side">
    <ul class="header-menu">
      <li class="header-menu-item home"><a href="/index.html">HOME</a></li>
      <li class="header-menu-item docs  selected "><a href="/docs/what_is_electrode.html">DOCS</a></li>
      <li class="header-menu-item contribute "><a href="/docs/contribute.html">CONTRIBUTE</a></li>
    </ul>
    <ul class="header-social">
      <li class="header-social-pocket"><a href="https://getpocket.com/"><img src="/img/pocket_@1x.png" /></a></li>
      <li class="header-social-twitter"><a href="https://twitter.com/electrode_io"><img src="/img/twitter_@1x.png" /></a></li>
      <li class="header-social-github"><a href="https://github.com/electrode-io"><img src="/img/github_@1x.png" /></a></li>
    </ul>
  </div>
</header>


    

    <section class="content wrap documentationContent">
  <div class="nav-docs">
  
    <div class="nav-docs-section">
      <h3>Overview</h3>
      
        <ul>
          


  
  
  
  
    <li>
    

    <a href="/docs/what_is_electrode.html"> &nbsp; What is Electrode?</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/why_use_electrode.html"> &nbsp; Why Use Electrode?</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/requirements.html"> &nbsp; Requirements</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


        </ul>
      
    </div>
  
    <div class="nav-docs-section">
      <h3>Getting Started</h3>
      
        
          <h5>Quick Start</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/get_started.html"> &nbsp; Get Started</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/build_component.html"> &nbsp; Build Component</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/deploy_app.html"> &nbsp; Deploy Your App</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/whats_inside.html"> &nbsp; What's Inside</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/what_are_archetypes.html"> &nbsp; What are Archetypes?</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
          <h5>Intermediate</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/create_reusable_component.html"> &nbsp; Create a Reusable Component</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/low_level_components.html"> &nbsp; Low-Level Components</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/component_helpers.html"> &nbsp; Component Helpers</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/develop_styles.html"> &nbsp; Develop Styles</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/high_level_component.html"> &nbsp; Develop Main Component</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/test_components.html"> &nbsp; Test Components</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/add_examples.html"> &nbsp; Add Examples</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/build_and_demo.html"> &nbsp; Build and Demo</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/generate_docs.html"> &nbsp; Generate Docs</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/build_server_plugin.html"> &nbsp; Build a Server Plugin</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/add_routes.html"> &nbsp; Add Routes</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/server_config.html"> &nbsp; Server Config</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/more_deployments.html"> &nbsp; More Deployments</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/docker.html"> &nbsp; Docker</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/kubernetes.html"> &nbsp; Kubernetes</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/build_with_material_ui.html"> &nbsp; Build with material-ui</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/service_workers.html"> &nbsp; Build a Progressive Web App</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/ss_data_hydration.html"> &nbsp; Server Side Data Hydration</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
          <h5>Advanced</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/stand_alone_modules.html"> &nbsp; Stand Alone Modules</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/confippet.html" class="active"> &nbsp; Confippet</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/above_fold_rendering.html"> &nbsp; Above The Fold Rendering</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/server_side_render_cache.html"> &nbsp; Server Side Render Caching + Profiling</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/stateless_csrf_validation.html"> &nbsp; Stateless CSRF Validation</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/redux_router_engine.html"> &nbsp; Redux Router Engine</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/electrode_tools.html"> &nbsp; Powerful Electrode Tools</a>

    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/electrify.html"> &nbsp; Electrify</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/electrode_explorer.html"> &nbsp; Electrode Explorer</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    
      <ul><li>
    

    <a href="/docs/bundle_analyzer.html"> &nbsp; Bundle Analyzer</a>

    
      </li></ul>
    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/electrode_boilerplate.html"> &nbsp; Electrode Boilerplate</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
          <h5>Over the Air</h5>
          <ul>
            


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/electrode_react_native_over_the_air_electron.html"> &nbsp; React Native and Over the Air</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  


          </ul>
        
      
    </div>
  
    <div class="nav-docs-section">
      <h3>Contributing</h3>
      
        <ul>
          


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/contribute.html"> &nbsp; Contribute</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/community.html"> &nbsp; Community</a>

    
    </li>
  

  
  
  
  

  
  
  
  

  
  
  
  


        </ul>
      
    </div>
  
    <div class="nav-docs-section">
      <h3>Resources</h3>
      
        <ul>
          


  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  

  
  
  
  
    <li>
    

    <a href="/docs/further_reading.html"> &nbsp; Further Reading</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/glossary.html"> &nbsp; Glossary</a>

    
    </li>
  

  
  
  
  
    <li>
    

    <a href="/docs/faq.html"> &nbsp; FAQs</a>

    
    </li>
  


        </ul>
      
    </div>
  


  <!-- Tips Nav -->
  <!-- 
    <div class="nav-docs-section">
      <h3>Tips</h3>
      <ul>
        
          <li>
            <a href="/tips/introduction.html">Introduction</a>
          </li>
        
      </ul>
    </div>
   -->

  <!-- Contributing Nav -->
  <!-- 
    <div class="nav-docs-section">
      <h3>Contributing</h3>
      <ul>
        
          <li>
            <a href="/contributing/design-principles.html">Design Principles</a>
          </li>
        
      </ul>
    </div>
   -->
</div>


  <div class="inner-content">
    <a class="edit-page-link" href="https://github.com/electrode-io/electrode-io.github.io/tree/master/_docs/04.1.1-confippet.markdown" target="_blank">Edit on GitHub</a>
    <h1>Confippet</h1>
    <div class="subHeader"></div>

    <!-- define reference links -->

<p><a href="https://github.com/electrode-io/electrode-confippet">Confippet</a> is a versatile, flexible utility for managing configurations of Node.js applications. It’s simple to get started and can be customized and extended to meet the needs of your app.</p>

<p><a href="https://github.com/electrode-io/electrode-confippet">Confippet</a> can be used as a standalone module in your favorite Node.js web server framework or application.</p>

<h3 id="features">Features</h3>

<ul>
  <li><strong>Simple</strong> - Confippet’s <code class="language-plaintext highlighter-rouge">presetConfig</code> automatically composes a single config object from multiple files. For most applications, no further customization isnecessary.</li>
  <li><strong>Flexible</strong> - Supports JSON, YAML, and JavaScript config files.</li>
  <li><strong>Powerful</strong> - Handles complex multi-instance enterprise deployments.</li>
  <li><strong>Platform Agnostic</strong> - This module is platform agnostic and can be plugged into any Node.js application, including those run on Electrode, Express.js and Hapi.js</li>
</ul>

<h2 id="module-electrode-confippet">Module: <a href="https://github.com/electrode-io/electrode-confippet">electrode-confippet</a></h2>

<h3 id="install-via-npm">Install via <code class="language-plaintext highlighter-rouge">npm</code></h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save</span> electrode-confippet
</code></pre></div></div>

<h3 id="example-applications">Example Applications</h3>

<ul>
  <li>
    <p><a href="https://github.com/electrode-io/electrode-boilerplate-universal-react-node#electrode-confippet">Electrode Boilerplate</a></p>
  </li>
  <li>
    <p><a href="https://github.com/docs-code-examples-electrode-io/express-example-with-standalone-electrode-modules#electrode-confippet">Express Example with Standalone Modules</a></p>
  </li>
  <li>
    <p><a href="https://github.com/docs-code-examples-electrode-io/hapijs-example-with-standalone-electrode-modules#electrode-confippet">Hapi Example with Standalone Modules</a></p>
  </li>
</ul>

<h2 id="usage">Usage</h2>

<ul>
  <li><a href="#getting-started">Getting Started</a></li>
  <li><a href="#config-composition">Config Composition</a></li>
  <li><a href="#environment-variables">Environment Variables</a></li>
  <li><a href="#using-templates">Using Templates</a></li>
  <li><a href="#usage-in-node-modules">Usage in Node Modules</a></li>
  <li><a href="#customization">Customization</a></li>
</ul>

<h3 id="getting-started">Getting Started</h3>

<p>Confippet can be integrated seamlessly into any existing <a href="#express-setup">Express</a>, <a href="#hapi-setup">Hapi</a> or <a href="#electrode-setup">Electrode</a> application.</p>

<p>For example, let’s say that in our application we need to access a database that is running locally in our development environment but is running on a specific hostname in our production environment. We would like to be able to get  the correct hostname in our code based on the current environment. Confippet can help us with this. Follow the setup instructions for this example depending on your app’s framework:</p>

<ul>
  <li><a href="#electrode-setup">Electrode</a></li>
  <li><a href="#express-setup">Express</a></li>
  <li><a href="#hapi-setup">Hapi</a></li>
</ul>

<h4 id="electrode-setup"><strong><em>Electrode Setup</em></strong></h4>
<p>Electrode applications that were generated using <code class="language-plaintext highlighter-rouge">yo electrode</code> have already been bootstrapped with the necessary config files to set up <a href="https://github.com/electrode-io/electrode-confippet">Confippet</a>. Let’s take a look at the following files:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config
|_ default.json
|_ development.json
|_ production.json
</code></pre></div></div>

<p>First, let’s update the default settings for our database connection by adding the following setting to <code class="language-plaintext highlighter-rouge">default.json</code>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span><span class="p">,</span><span class="w">
      </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clients"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Then we will set up the development and production environments.</p>

<h5 id="development-environment"><strong><em>Development Environment</em></strong></h5>
<p>We want our database to be served from different hostnames depending on the environment. So let’s update <code class="language-plaintext highlighter-rouge">development.json</code> to include the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"compression"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"log"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"error"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"error"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev-db-server"</span><span class="w">
   </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Now, while <code class="language-plaintext highlighter-rouge">NODE_ENV=development</code> :</p>

<ul>
  <li>Server log errors that may be beneficial for debugging will now be shown with content encoding <em>disabled</em></li>
  <li>The server is being run in port 3000</li>
  <li>The database is hosted from dev-db-server</li>
</ul>

<h5 id="production-environment"><strong><em>Production Environment</em></strong></h5>
<p>Similarly, update <code class="language-plaintext highlighter-rouge">production.json</code> to include the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"compression"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"log"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8000</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-db-server"</span><span class="w">
   </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now, while <code class="language-plaintext highlighter-rouge">NODE_ENV=production</code> :</p>

<ul>
  <li>Server log errors are <em>disabled</em> and content encoding is <em>enabled</em></li>
  <li>Server is run in port 8000</li>
  <li>The database will be hosted from prod-db-server</li>
</ul>

<p>Additionally, here are some notes about the settings you just copied:</p>

<ul>
  <li>The server related configs are from hapi.js. More config options can be found here: http://hapijs.com/api</li>
  <li>The connections property is specific to <a href="https://github.com/electrode-io/electrode-server/tree/master/lib/config">electrode server</a></li>
  <li>Any settings that exist in the <code class="language-plaintext highlighter-rouge">config/default.json</code> that are <em>also</em> in the other environment configs will be replaced by the environment specific versions</li>
</ul>

<h5 id="electrode-configuration"><strong><em>Electrode Configuration</em></strong></h5>
<p>Last step! Let’s set up our Electrode application to use the new database settings by adding the following line to <code class="language-plaintext highlighter-rouge">server/index.js</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const db = config.$("settings.db");
</code></pre></div></div>

<h4 id="express-setup"><strong><em>Express Setup</em></strong></h4>

<p>Confippet requires a config directory to pull settings from:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir config
cd config
</code></pre></div></div>
<p>Let’s add the following files to the <code class="language-plaintext highlighter-rouge">config</code> directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config
|_ default.json
|_ development.json
|_ production.json
</code></pre></div></div>

<p>Then update <code class="language-plaintext highlighter-rouge">default.json</code> to include the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"viewCache"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"xPoweredBy"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span><span class="p">,</span><span class="w">
      </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clients"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Now we can set up the development and production specific settings.</p>

<h5 id="development-environment-1"><strong><em>Development Environment</em></strong></h5>
<p>Update <code class="language-plaintext highlighter-rouge">config/development.json</code> to have the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"viewCache"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"xPoweredBy"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev-db-server"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now, while <code class="language-plaintext highlighter-rouge">NODE_ENV=development</code>:</p>

<ul>
  <li>the view cache is <em>disabled</em></li>
  <li>the x-powered-by header is <em>enabled</em></li>
  <li>the server is run in port 4000</li>
  <li>the databse is hosted from dev-db-server</li>
</ul>

<h5 id="production-environment-1"><strong><em>Production Environment</em></strong></h5>

<p>Update <code class="language-plaintext highlighter-rouge">config/production.json</code> to have the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"viewCache"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"xPoweredBy"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-db-server"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now, while <code class="language-plaintext highlighter-rouge">NODE_ENV=production</code> :</p>

<ul>
  <li>the view cache is <em>enabled</em></li>
  <li>the x-powered-by header is <em>disabled</em></li>
  <li>the server is run in port 8000</li>
  <li>the database is hosted from prod-db-server</li>
</ul>

<h5 id="express-configuration"><strong><em>Express Configuration</em></strong></h5>
<p>To require the confippet settings, simply add the following to <code class="language-plaintext highlighter-rouge">app.js</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const {config} = require("electrode-confippet");
const db = config.$("settings.db");

app.set("view cache", config.server.viewCache);
app.set("x-powered-by", config.server.xPoweredBy);
app.listen(config.server.port);
</code></pre></div></div>

<h4 id="hapi-setup"><strong><em>Hapi Setup</em></strong></h4>

<p>Confippet requires a config directory to pull settings from:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir config
cd config
</code></pre></div></div>

<p>Let’s add the following files to the <code class="language-plaintext highlighter-rouge">config</code> directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config
|_ default.json
|_ development.json
|_ production.json
</code></pre></div></div>

<p>Then update <code class="language-plaintext highlighter-rouge">default.json</code> to include the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"connection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span><span class="p">,</span><span class="w">
      </span><span class="nl">"database"</span><span class="p">:</span><span class="w"> </span><span class="s2">"clients"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now we can set up the development and production specific settings.</p>

<h5 id="development-environment-2"><strong><em>Development Environment</em></strong></h5>
<p>Update <code class="language-plaintext highlighter-rouge">config/development.json</code> to have the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"connection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev-db-server"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now, while <code class="language-plaintext highlighter-rouge">NODE_ENV=development</code> :</p>

<ul>
  <li>The above settings run the server in port 4000</li>
  <li>The database is hosted from dev-db-server</li>
</ul>

<h5 id="production-environment-2"><strong><em>Production Environment</em></strong></h5>

<p>Update the <code class="language-plaintext highlighter-rouge">config/production.json</code> to have the following settings:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"connection"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="mi">8000</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"db"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-db-server"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Now, while <code class="language-plaintext highlighter-rouge">NODE_ENV=production</code>:</p>

<ul>
  <li>The above settings run the server in port 8000</li>
  <li>The database is hosted from prod-db-server</li>
</ul>

<h5 id="hapi-configuration"><strong><em>Hapi Configuration</em></strong></h5>
<p>To require the confippet settings, simply add the following to <code class="language-plaintext highlighter-rouge">app.js</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const {config} = require("electrode-confippet");
const db = config.$("settings.db");
</code></pre></div></div>

<h3 id="config-composition">Config Composition</h3>

<p>Confippet’s <code class="language-plaintext highlighter-rouge">presetConfig</code> composes together files in the <code class="language-plaintext highlighter-rouge">config/</code> directory,
in the following order:</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">default.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">default-{instance}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{deployment}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{deployment}-{instance}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{short_hostname}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{short_hostname}-{instance}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{short_hostname}-{deployment}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{short_hostname}-{deployment}-{instance}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{full_hostname}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{full_hostname}-{instance}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{full_hostname}-{deployment}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">{full_hostname}-{deployment}-{instance}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">local.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">local-{instance}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">local-{deployment}.EXT</code></li>
  <li><code class="language-plaintext highlighter-rouge">local-{deployment}-{instance}.EXT</code></li>
</ol>

<p>Where:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">EXT</code> can be any of <code class="language-plaintext highlighter-rouge">["json", "yaml", "js"]</code>. Confippet will load all of them,
in that order. Each time it finds a config file, the values in that file will
be loaded and merged into the config store. So <code class="language-plaintext highlighter-rouge">js</code> overrides <code class="language-plaintext highlighter-rouge">yaml</code>, which
overrides <code class="language-plaintext highlighter-rouge">json</code>. You can add handlers for other file types and change their
loading order—see <a href="https://github.com/electrode-io/electrode-confippet/blob/master/compose.md">composeConfig</a> for further details.</li>
  <li><code class="language-plaintext highlighter-rouge">{instance}</code> is your app’s instance string in multi-instance deployments
(specified by the <code class="language-plaintext highlighter-rouge">NODE_APP_INSTANCE</code> environment variable).</li>
  <li><code class="language-plaintext highlighter-rouge">{short_hostname}</code> is your server name up to the first dot.</li>
  <li><code class="language-plaintext highlighter-rouge">{full_hostname}</code> is your whole server name.</li>
  <li><code class="language-plaintext highlighter-rouge">{deployment}</code> is your deployment environment (specified by the <code class="language-plaintext highlighter-rouge">NODE_ENV</code>
environment variable).</li>
</ul>

<p>Overridden values are handled as follows:</p>

<ul>
  <li>Objects are merged.</li>
  <li>Primitive values (string, boolean, number) are replaced.</li>
  <li><strong>Arrays are replaced</strong>, unless the key starts with <code class="language-plaintext highlighter-rouge">+</code> <em>and</em> both the source
and the target are arrays. In that case, the two arrays are joined together
using Lodash’s <code class="language-plaintext highlighter-rouge">_.union</code> method.</li>
</ul>

<p>After Confippet loads all available configuration files, it will look for
override JSON strings from the <code class="language-plaintext highlighter-rouge">NODE_CONFIG</code> and <code class="language-plaintext highlighter-rouge">CONFIPPET*</code> environment
variables. See the next section for details.</p>

<h3 id="environment-variables">Environment Variables</h3>

<p>Confippet reads the following environment variables when composing a config
store:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">AUTO_LOAD_CONFIG_OFF</code> - If this is set, then Confippet will <strong>not</strong>
automatically load any configuration into the preset <code class="language-plaintext highlighter-rouge">config</code> store.
<code class="language-plaintext highlighter-rouge">Confippet.config</code> will be an empty store. This enables you to customize the
config structure before loading.</li>
  <li><code class="language-plaintext highlighter-rouge">NODE_CONFIG_DIR</code> - Set the directory to search for config files. By default,
Confippet looks in the <code class="language-plaintext highlighter-rouge">config</code> directory for config files.</li>
  <li><code class="language-plaintext highlighter-rouge">NODE_ENV</code> - By default, Confippet loads <code class="language-plaintext highlighter-rouge">development</code> config files after
loading <code class="language-plaintext highlighter-rouge">default</code>. Set this environment variable to change to a different
deployment, such as <code class="language-plaintext highlighter-rouge">production</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">NODE_APP_INSTANCE</code> - If your app is deployed to multiple instances, you can
set this to load instance-specific configurations.</li>
  <li><code class="language-plaintext highlighter-rouge">AUTO_LOAD_CONFIG_PROCESS_OFF</code> - By default, after composing the config from
all sources, Confippet will use <a href="https://github.com/electrode-io/electrode-confippet/blob/master/templates.md">processConfig</a> to process
<a href="#using-templates">templates</a>. You can set this environment variable to
disable template processing.</li>
  <li><code class="language-plaintext highlighter-rouge">NODE_CONFIG</code> - You can set this to a valid JSON string and Confippet will
parse it to override the configuration.</li>
  <li><code class="language-plaintext highlighter-rouge">CONFIPPET*</code> - Any environment variables that starts with <code class="language-plaintext highlighter-rouge">CONFIPPET</code> will be
parsed as JSON strings to override the configuration.</li>
</ul>

<h3 id="using-templates">Using Templates</h3>

<p>Values in your config files can be templates, which will be resolved with
a preset context. See <a href="https://github.com/electrode-io/electrode-confippet/blob/master/templates.md">processConfig</a> for more information about how to use
config value templates.</p>

<h3 id="usage-in-node-modules">Usage in Node Modules</h3>

<p>If you have a Node.js module that has its own configurations based on
environment variables, like <code class="language-plaintext highlighter-rouge">NODE_ENV</code>, you can use Confippet to load config
files for your module.</p>

<p>The example below will use the <a href="https://github.com/electrode-io/electrode-confippet/blob/master/lib/default-compose-opts.js">default compose options</a> to compose
configurations from the directory <code class="language-plaintext highlighter-rouge">config</code> under the script’s directory
(<code class="language-plaintext highlighter-rouge">__dirname</code>).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">Confippet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">electrode-confippet</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">dirs</span><span class="p">:</span> <span class="p">[</span><span class="nx">Path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">config</span><span class="dl">"</span><span class="p">)],</span>
  <span class="na">warnMissing</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">context</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">deployment</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NODE_ENV</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="nx">Confippet</span><span class="p">.</span><span class="nx">store</span><span class="p">();</span>
<span class="nx">defaults</span><span class="p">.</span><span class="nx">_$</span><span class="p">.</span><span class="nx">compose</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="customization">Customization</h3>

<p>The <a href="https://github.com/electrode-io/electrode-confippet/blob/master/compose.md">composeConfig</a> feature supports a fully customizable and extendable config
structure. Even Confippet’s own preset config structure can be extended, since
it’s composed using the same feature.</p>

<p>If you want to use the preset config, but add an extension handler or insert
a source, you can turn off auto loading, and load it yourself with your own
options.</p>

<blockquote>
  <p><strong>NOTE:</strong> This has to happen before any other file accesses
<code class="language-plaintext highlighter-rouge">Confippet.config</code>. You should do this in your startup <code class="language-plaintext highlighter-rouge">index.js</code> file.</p>
</blockquote>

<p>For example:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">AUTO_LOAD_CONFIG_OFF</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">JSON5</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">json5</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">fs</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">Confippet</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">electrode-confippet</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">Confippet</span><span class="p">.</span><span class="nx">config</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">extHandlers</span> <span class="o">=</span> <span class="nx">Confippet</span><span class="p">.</span><span class="nx">extHandlers</span><span class="p">;</span>
<span class="nx">extHandlers</span><span class="p">.</span><span class="nx">json5</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fullF</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">JSON5</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">fullF</span><span class="p">,</span> <span class="dl">"</span><span class="s2">utf8</span><span class="dl">"</span><span class="p">));</span>

<span class="nx">Confippet</span><span class="p">.</span><span class="nx">presetConfig</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">extSearch</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">json5</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">yaml</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">js</span><span class="dl">"</span><span class="p">],</span>
  <span class="nx">extHandlers</span><span class="p">,</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">customConfig</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
      <span class="na">order</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
      <span class="na">type</span><span class="p">:</span> <span class="nx">Confippet</span><span class="p">.</span><span class="nx">providerTypes</span><span class="p">.</span><span class="nx">required</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<p>The above compose option adds a new provider that looks for a file named by the
environment variable <code class="language-plaintext highlighter-rouge">CUSTOM_CONFIG_SOURCE</code> and will be loaded after all default
sources are loaded (controlled by <code class="language-plaintext highlighter-rouge">order</code>).</p>

<p>It also adds a new extension handler, <code class="language-plaintext highlighter-rouge">json5</code>, to be loaded after <code class="language-plaintext highlighter-rouge">json</code>.</p>

<p>To further understand the <code class="language-plaintext highlighter-rouge">_$</code> and the <code class="language-plaintext highlighter-rouge">compose</code> options, please see the
documentation for <a href="https://github.com/electrode-io/electrode-confippet/blob/master/store.md">store</a>, <a href="https://github.com/electrode-io/electrode-confippet/blob/master/compose.md">composeConfig</a>, and <a href="https://github.com/electrode-io/electrode-confippet/blob/master/templates.md">processConfig</a></p>


    








<div class="docs-prevnext">
  
    <a class="docs-prev" href="/docs/stand_alone_modules.html">&larr; Prev</a>
  
  
    <a class="docs-next" href="/docs/above_fold_rendering.html">Next &rarr;</a>
  
</div>


  </div>
</section>


    <footer class="wrap">
      <div class="left">
        <a href="https://github.com/orgs/electrode-io/people" target="_blank">Acknowledgements</a>
      </div>
      <div class="right">
        &copy; 2020 <a href="http://walmartlabs.com" target="_blank">WalmartLabs</a><br>
        Apache-2.0 license.
      </div>
    </footer>
  </div>
  <div id="fb-root"></div>

  <!--
    TODO: analytics js, etc.
  -->
</body>
</html>
